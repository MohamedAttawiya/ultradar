<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ultradar — Strategies</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="../css/strategies.css" />
</head>
<body>
  <!-- Injected header -->
  <div id="site-header" role="banner"></div>

  <!-- Injected S&OP subnav -->
  <div id="sopSubnavHost" class="subnav-host"></div>

  <main class="container">

    <!-- Outer panel (same geometry as Slot Curves) -->
    <section class="panel strategy-shell" aria-labelledby="strategiesTitle">
  <div class="strategy-layout">
    <!-- Sidebar -->
    <aside class="strategy-sidebar" aria-label="Strategy navigation">
      <ul class="strategy-list" role="tablist">
        <li><a href="#edit"       class="strategy-link is-active" data-view="edit"       role="tab" aria-selected="true">Edit Strategy</a></li>
        <li><a href="#create"     class="strategy-link"           data-view="create"     role="tab" aria-selected="false">Create Strategy</a></li>
        <li><a href="#exclusions" class="strategy-link"           data-view="exclusions" role="tab" aria-selected="false">Exclusions</a></li>
		        <li><a href="#presets" class="strategy-link"           data-view="presets" role="tab" aria-selected="false">Presets</a></li>

      </ul>
    </aside>

        <!-- Content -->
            <section class="strategy-content panel">
          <!-- EDIT -->
            <div class="strategy-view" data-view="edit" data-state="active" role="tabpanel" aria-labelledby="edit">
            <h3 style="margin:0 0 8px;">Edit Strategy</h3>
            <p class="muted" style="margin:0 0 10px;">Search and modify existing strategies. Wire your table and form here.</p>

            <div class="controls" style="margin:10px 0 12px;">
              <label class="control">
                <span class="control__label">Search</span>
                <input class="control__input" type="text" placeholder="Search by name…">
              </label>
              <label class="control">
                <span class="control__label">Status</span>
                <select class="control__input">
                  <option value="">All statuses</option>
                  <option value="active">Active</option>
                  <option value="draft">Draft</option>
                  <option value="archived">Archived</option>
                </select>
              </label>
              <button class="btn" type="button">Apply</button>
            </div>

            <div id="strategy-list" aria-live="polite"></div>
          </div>

          <!-- CREATE -->
			<div class="strategy-view" data-view="create" role="tabpanel" aria-labelledby="create">
            <h3 style="margin:0 0 8px;">Create Strategy</h3>
            <p class="muted" style="margin:0 0 10px;">Define weights (LW, LW-1, LW-2, …), choose smoothing, and bind day/week shapes.</p>

            <form style="display:grid;grid-template-columns:repeat(2,minmax(240px,1fr));gap:12px;max-width:920px;margin-top:8px;">
              <label class="control">
                <span class="control__label">Strategy Name</span>
                <input class="control__input" type="text" placeholder="e.g., Aggressive Weekend EMA">
              </label>

              <label class="control">
                <span class="control__label">Status</span>
                <select class="control__input">
                  <option value="active">Active</option>
                  <option value="draft">Draft</option>
                </select>
              </label>

              <label class="control">
                <span class="control__label">Weights (LW/LW-1/LW-2)</span>
                <input class="control__input" type="text" placeholder="0.6, 0.3, 0.1">
              </label>

              <label class="control">
                <span class="control__label">Smoothing</span>
                <select class="control__input">
                  <option>EMA</option>
                  <option>SMA</option>
                  <option>LOWESS</option>
                </select>
              </label>

              <label class="control">
                <span class="control__label">Use Week Shape</span>
                <select class="control__input"><option>On</option><option>Off</option></select>
              </label>

              <label class="control">
                <span class="control__label">Use Day Shape</span>
                <select class="control__input"><option>On</option><option>Off</option></select>
              </label>

              <div style="grid-column:1/-1;display:flex;gap:8px;margin-top:6px;">
                <button class="btn" type="button" style="background:var(--accent-2);">Preview</button>
                <button class="btn" type="submit">Save</button>
              </div>
            </form>
          </div>

          <!-- EXCLUSIONS -->
            <div class="strategy-view" data-view="exclusions" role="tabpanel" aria-labelledby="exclusions">
            <div class="exclusions-layout">
              <section class="exclusions-builder panel" aria-labelledby="exclusionsBuilderTitle">
                <div class="exclusions-builder__header">
                  <div>
                    <h3 id="exclusionsBuilderTitle">Exclusions</h3>
                    <p class="muted">Manage global or scoped exclusions for stores, days, slots, or holidays.</p>
                  </div>
                  <button class="btn" type="button" data-action="create-exclusion">Create Exclusion</button>
                </div>
                <div class="exclusions-builder__body">
                  <p class="muted" style="margin:0;">
                    Use <strong>Create Exclusion</strong> to open the dedicated builder window. Select the dates to exclude,
                    optionally target specific stores, and attach the exclusion to one or more strategies. Newly created
                    exclusions will appear below.
                  </p>
                </div>
              </section>

              <section class="exclusions-board panel" aria-labelledby="exclusionsBoardTitle">
                <header class="exclusions-board__header">
                  <div>
                    <h4 id="exclusionsBoardTitle">Current Exclusions</h4>
                    <p class="muted">Review exclusions you have created and what they attach to.</p>
                  </div>
                  <button class="btn-plain" type="button" data-action="reload-exclusions">Reload</button>
                </header>
                <div id="exclusion-list" class="exclusion-card-list" aria-live="polite"></div>
              </section>
            </div>
          </div>
        </section>
      </div>
    </section>
  </main>

  <!-- Injected footer -->
  <div id="site-footer" role="contentinfo"></div>

  <!-- App scripts -->
<script src="../js/main.js"></script>
<script src="../js/strategy-form.js"></script>
<script src="../js/strategies.js"></script>
<script src="../js/exclusion-form.js"></script>

  

  <!-- Inject partials & highlight active subnav -->
  <script>
    injectPartial('site-header', '../partials/header.html');
    injectPartial('sopSubnavHost', '../partials/sop-subnav.html').then(() => {
      highlightActive(location.pathname, '#sopSubnavHost', '.subnav__link');
    });
    injectPartial('site-footer', '../partials/footer.html');
  </script>
</body>
</html>
